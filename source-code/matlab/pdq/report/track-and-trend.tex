% Data generated by pdq_generate_reports:generate_track_and_trend.
% 
% Copyright 2017 United States Government as represented by the
% Administrator of the National Aeronautics and Space Administration.
% All Rights Reserved.
% 
% This file is available under the terms of the NASA Open Source Agreement
% (NOSA). You should have received a copy of this agreement with the
% Kepler source code; see the file NASA-OPEN-SOURCE-AGREEMENT.doc.
% 
% No Warranty: THE SUBJECT SOFTWARE IS PROVIDED "AS IS" WITHOUT ANY
% WARRANTY OF ANY KIND, EITHER EXPRESSED, IMPLIED, OR STATUTORY,
% INCLUDING, BUT NOT LIMITED TO, ANY WARRANTY THAT THE SUBJECT SOFTWARE
% WILL CONFORM TO SPECIFICATIONS, ANY IMPLIED WARRANTIES OF
% MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR FREEDOM FROM
% INFRINGEMENT, ANY WARRANTY THAT THE SUBJECT SOFTWARE WILL BE ERROR
% FREE, OR ANY WARRANTY THAT DOCUMENTATION, IF PROVIDED, WILL CONFORM
% TO THE SUBJECT SOFTWARE. THIS AGREEMENT DOES NOT, IN ANY MANNER,
% CONSTITUTE AN ENDORSEMENT BY GOVERNMENT AGENCY OR ANY PRIOR RECIPIENT
% OF ANY RESULTS, RESULTING DESIGNS, HARDWARE, SOFTWARE PRODUCTS OR ANY
% OTHER APPLICATIONS RESULTING FROM USE OF THE SUBJECT SOFTWARE.
% FURTHER, GOVERNMENT AGENCY DISCLAIMS ALL WARRANTIES AND LIABILITIES
% REGARDING THIRD-PARTY SOFTWARE, IF PRESENT IN THE ORIGINAL SOFTWARE,
% AND DISTRIBUTES IT "AS IS."
%
% Waiver and Indemnity: RECIPIENT AGREES TO WAIVE ANY AND ALL CLAIMS
% AGAINST THE UNITED STATES GOVERNMENT, ITS CONTRACTORS AND
% SUBCONTRACTORS, AS WELL AS ANY PRIOR RECIPIENT. IF RECIPIENT'S USE OF
% THE SUBJECT SOFTWARE RESULTS IN ANY LIABILITIES, DEMANDS, DAMAGES,
% EXPENSES OR LOSSES ARISING FROM SUCH USE, INCLUDING ANY DAMAGES FROM
% PRODUCTS BASED ON, OR RESULTING FROM, RECIPIENT'S USE OF THE SUBJECT
% SOFTWARE, RECIPIENT SHALL INDEMNIFY AND HOLD HARMLESS THE UNITED
% STATES GOVERNMENT, ITS CONTRACTORS AND SUBCONTRACTORS, AS WELL AS ANY
% PRIOR RECIPIENT, TO THE EXTENT PERMITTED BY LAW. RECIPIENT'S SOLE
% REMEDY FOR ANY SUCH MATTER SHALL BE THE IMMEDIATE, UNILATERAL
% TERMINATION OF THIS AGREEMENT.
%

\section{Track and Trend of PDQ Metrics}

\subsection{Actual Bounds Crossings of PDQ Metrics}

\ifdefined \pdqboundcrossingsacrossthefocalplane

\begin{center}
  \includegraphics[width=\imagewidth]{\pdqboundcrossingsacrossthefocalplane.png}
\end{center}

Actual bound crossings for all PDQ metrics for the focal plane from
the start of the latest contact. The metric layout is as follows.

For each module output a 4 x 3 grid is used to represent the each of
the metrics:

\begin{tabular*}{\tablewidth}{l l l}
  Background Level & Black Level & Centroid Column\\
  Centroid Row & Dark Current & Dynamic Range\\
  Encircled Energy & Mean Flux & Plate Scale\\
  Smear Level\\
\end{tabular*}

The four bars on the upper left are:

\begin{tabular*}{\tablewidth}{l l l l}
  Delta Attitude RA & Delta Attitude Dec & Delta Attitude Roll & Max. Attitude Residual in Pixels\\
\end{tabular*}

The color scheme is as follows:

\begin{tabular*}{\tablewidth}{l l}
  Green & No bound crossings over the cadences from the start of the latest contact\\
  Yellow & Crossed adaptive bounds at least once over the cadences\\
  Magenta & Gapped metrics present for at least one of the latest reference pixels\\
  Red & Crossed fixed bound at least once over the cadences\\
  Cyan & No data available\\
\end{tabular*}

Open \url{\pdqboundcrossingsacrossthefocalplane.fig}

\else
No figure named pdq\_bound\_crossings\_across\_the\_focal\_plane.fig
is available.
\fi

\clearpage

\subsubsection{Bounds Crossings Summary}

{\bf Fixed Bounds Crossings.} The values of the module output and
focal plane metrics for all cadences in all PDQ output time series are
compared against fixed upper and lower bounds set specifically for
each metric type. These fixed bounds are provided as module parameters
in the PDQ input structure. The following table lists the fixed bound
crossings by module output (where applicable) and metric beginning
with the first cadence in the latest PDQ contact. The MJD time tag of
the bound crossing is listed in the table for each fixed bound
crossing event, along with the normalized value of the out of bound
metric. The normalized value is equal to the estimated number of
standard deviations that the metric value falls above (positive) or
below (negative) the smoothed mean of the metric time series at the
instant of the bound crossing.

\IfFileExists{PDQ_Fixed_Bound_Crossings_Report.txt}{
  \verbatiminput{PDQ_Fixed_Bound_Crossings_Report.txt}
}{
  \texttt{\newline No file named PDQ\_Fixed\_Bound\_Crossings\_Report.txt is
    available.}
}

{\bf Adaptive Bounds Crossings.} The values of the module output
and focal plane metrics in all PDQ output time series are tracked and
trended in a similar fashion. Tracking for each PDQ metric involves
recursive estimation of the mean and variance of the given metric time
series, and comparison of the metric values with upper and lower
adaptive bounds which are determined from the mean and variance
estimates at each cadence. The number of standard deviations at which
the bounds are set from the mean is specified as a module parameter in
the PDQ inputs structure. The following table lists the adaptive bound
crossings by module output (where applicable) and metric beginning
with the first cadence in the latest PDQ contact. The MJD time tag of
the bound crossing is listed in the table for each adaptive bound
crossing event, along with the normalized value of the out of bound
metric. The normalized value is equal to the estimated number of
standard deviations that the metric value falls above (positive) or
below (negative) the smoothed mean of the metric time series at the
instant of the bound crossing. The magnitude of the normalized value
must exceed the threshold set by module parameter for identification
of adaptive bound crossings.

\IfFileExists{PDQ_Adaptive_Bound_Crossings_Report.txt}{
  \verbatiminput{PDQ_Adaptive_Bound_Crossings_Report.txt}
}{
  \texttt{\newline No file named PDQ\_Fixed\_Bound\_Crossings\_Report.txt is
    available.\\}
}

\clearpage

\subsection{Predicted Fixed Bounds Crossing of PDQ Metrics}

\ifdefined \pdqboundcrossingpredictionsacrossthefocalplane

\begin{center}
  \includegraphics[width=\imagewidth]{\pdqboundcrossingpredictionsacrossthefocalplane.png}
\end{center}

Predicted bound crossings within the specified horizon time for all
PDQ metrics for the focal plane. If the metric time series is out of
bounds as of the final cadence, no predictive bound crossing data is
generated. The metric layout is as follows.

For each module output a 4 x 3 grid is used to represent the each of
the metrics:

\begin{tabular*}{\tablewidth}{l l l}
  Background Level & Black Level & Centroid Column\\
  Centroid Row & Dark Current & Dynamic Range\\
  Encircled Energy & Mean Flux & Plate Scale\\
  Smear Level\\
\end{tabular*}

The  4 bars on the upper left are:

\begin{tabular*}{\tablewidth}{l l l l}
  Delta Attitude RA & Delta Attitude Dec & Delta Attitude Roll & Max. Attitude Residual in Pixels\\
\end{tabular*}

The color scheme is as follows:

\begin{tabular*}{\tablewidth}{l l}
  Green & No bound crossings predicted within the horizon time\\
  Yellow & Adaptive bound crossings predicted within the horizon time\\
  Magenta & Gapped metrics present for at least one of the latest reference pixels\\
  Red & Fixed bound crossings predicted  within the horizon time\\
  Cyan & No data available\\
\end{tabular*}

Open \url{\pdqboundcrossingpredictionsacrossthefocalplane.fig}

\else
No figure named
pdq\_bound\_crossing\_predictions\_across\_the\_focal\_plane.fig is
available.
\fi

\clearpage

\subsubsection{Predicted Crossing of Fixed Bounds Summary}

{\bf Fixed Bounds Crossing Prediction Summary.} The values of the
module output and focal plane metrics in all PDQ output time series
are tracked and trended in a similar fashion. Trending for each PDQ
metric involves fitting a linear polynomial to late values of the
recursively estimated mean of each metric time series, and projecting
the linear trend forward in time. A bound crossing is predicted if
either of the fixed upper or lower bounds for the given metric are
projected to be crossed within the specified (by module parameter)
horizon time from the last cadence in the metric time series. The
following table lists the predicted fixed bound crossings by module
output (where applicable) and metric. The projected MJD time tag of
the bound crossing is listed in the table for each predicted fixed
bound crossing event.

\IfFileExists{PDQ_Fixed_Bound_Crossing_Prediction_Report.txt}{
  \verbatiminput{PDQ_Fixed_Bound_Crossing_Prediction_Report.txt}
}{
  \texttt{\newline No file named PDQ\_Fixed\_Bound\_Crossing\_Prediction\_Report.txt is
    available.}
}

\clearpage

\subsection{Track and Trend for Delta Attitude}

\ifdefined \trackingtrendingdeltaattituderaacrossthefocalplane

\begin{center}
  \includegraphics[width=\imagewidth]{\trackingtrendingdeltaattituderaacrossthefocalplane.png}
\end{center}

Open \url{\trackingtrendingdeltaattituderaacrossthefocalplane.fig}

\else
No figure named
tracking\_trending\_delta\_attitude\_ra\_across\_the\_focal\_plane.fig
is available.
\fi

\ifdefined \trackingtrendingdeltaattitudedecacrossthefocalplane

\begin{center}
  \includegraphics[width=\imagewidth]{\trackingtrendingdeltaattitudedecacrossthefocalplane.png}
\end{center}

Open \url{\trackingtrendingdeltaattitudedecacrossthefocalplane.fig}

\else
No figure named
tracking\_trending\_delta\_attitude\_dec\_across\_the\_focal\_plane.fig
is available.
\fi

\ifdefined \trackingtrendingdeltaattituderollacrossthefocalplane

\begin{center}
  \includegraphics[width=\imagewidth]{\trackingtrendingdeltaattituderollacrossthefocalplane.png}
\end{center}

Open \url{\trackingtrendingdeltaattituderollacrossthefocalplane.fig}

\else
No figure named
tracking\_trending\_delta\_attitude\_roll\_across\_the\_focal\_plane.fig
is available.
\fi

\ifdefined \trackingtrendingmaxattituderesidualacrossthefocalplane

\begin{center}
  \includegraphics[width=\imagewidth]{\trackingtrendingmaxattituderesidualacrossthefocalplane.png}
\end{center}

Open \url{\trackingtrendingmaxattituderesidualacrossthefocalplane.fig}

\else
No figure named
tracking\_trending\_max\_attitude\_residual\_across\_the\_focal\_plane.fig
is available.
\fi

\clearpage
